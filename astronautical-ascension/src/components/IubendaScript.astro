---
const nonce = Astro.props.nonce ?? "";
---

<script type="text/javascript" nonce={nonce}>
  var _iub = _iub || [];
  _iub.csConfiguration = {
    lang: "de",
    siteId: 3958477, //use your siteId
    cookiePolicyId: 80237852, //use your cookiePolicyId
    enableCcpa: true,
    ccpaApplies: true,

    enableGdpr: true,
    gdprAppliesGlobally: false,
    gdprApplies: true,
    perPurposeConsent: true,

    timeoutLoadConfiguration: 30000,
    consentOnScroll: false, //avoid consent to be given when the user scrolls the page

    banner: {
      position: "float-top-center",
      acceptButtonDisplay: true,
      customizeButtonDisplay: true,
      rejectButtonDisplay: true,
    },

    callback: {
      onPreferenceExpressedOrNotNeeded: function (preference) {
        dataLayer.push({
          iubenda_ccpa_opted_out: _iub.cs.api.isCcpaOptedOut(),
        });

        if (!preference) {
          dataLayer.push({
            event: "iubenda_preference_not_needed",
          });
        } else {
          if (preference.consent === true) {
            dataLayer.push({
              event: "iubenda_consent_given",
            });
          } else if (preference.consent === false) {
            dataLayer.push({
              event: "iubenda_consent_rejected",
            });
          } else if (preference.purposes) {
            for (var purposeId in preference.purposes) {
              if (preference.purposes[purposeId]) {
                dataLayer.push({
                  event: "iubenda_consent_given_purpose_" + purposeId,
                });
              }
            }
          }
        }
      },
    },
  };
</script>
<script async src="//cdn.iubenda.com/cs/iubenda_cs.js"></script>
