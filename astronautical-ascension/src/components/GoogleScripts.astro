---
const nonce = Astro.props.nonce ?? "";
---
<script async nonce={nonce}>
  // Google Analytics Tag (MS GA 4 - G-CXBFDX52C7)
  function gtag() {
    window.dataLayer.push(arguments);
  }

  // Gtag-Konfiguration f√ºr Google Analytics
  gtag("js", new Date());
  gtag("config", "G-CXBFDX52C7", { "anonymize_ip": true });

  // Google Ads Tag (AW-1000620606)
  gtag("config", "AW-1000620606"); // Ersetze mit deiner Google Ads-Ziel-ID

  // Consent Mode Standardwerte setzen
  gtag("consent", "default", {
    ad_storage: "denied",
    ad_personalization: "denied",
    analytics_storage: "denied",
    personalization_storage: "denied"
  });

  // Consent Mode Update nach Einwilligung
  window.addEventListener("iubenda_consents_updated", function () {
    gtag("consent", "update", {
      ad_storage: "granted",
      ad_personalization: "granted",
      analytics_storage: "granted",
      personalization_storage: "granted"
    });
  });
</script>

<!-- Google Ads Tag (optional) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-1000620606"></script> <!-- Google Ads Ziel-ID: AW-1000620606 -->
