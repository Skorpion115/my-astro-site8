<script>
  // Sicherstellen, dass die DataLayer vorhanden ist
  window.dataLayer = window.dataLayer || [];

  // gtag() mit korrektem Typ definieren
  function gtag(...args: any[]) {
    window.dataLayer.push(args);
  }

  gtag("js", new Date());

  gtag("consent", "default", {
    ad_user_data: "denied",
    ad_personalization: "denied",
    ad_storage: "denied",
    analytics_storage: "denied",
    wait_for_update: 500,
  });

  // Consent-Check Funktion korrekt definieren
  function checkUserConsentFromEvent(event: any): boolean {
    return event?.detail?.consents?.["s26"] === true;
  }

  // Consent Event Listener hinzuf√ºgen
  document.addEventListener("cmpEvent", function (event: any) {
    if (checkUserConsentFromEvent(event)) {
      gtag("consent", "update", {
        ad_user_data: "granted",
        ad_personalization: "granted",
        ad_storage: "granted",
        analytics_storage: "granted",
      });
    }
  });
</script>
