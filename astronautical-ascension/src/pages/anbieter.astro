---
import ManuellesBlockieren from "../components/ManuellesBlockieren.astro";
import ExternalScripts from "../components/ExternalScripts.astro";
import ExternalScripts3 from "../components/ExternalScripts3.astro";
import GoogleScripts from "../components/GoogleScripts.astro";
const pageTitle = "Anbieter";
const nonce = Astro.props.nonce;
console.log("Astro nonce:", Astro.props.nonce);
// const cdid = 'b018a967f10b6';  // Beispiel für eine dynamische cdid-Nummer
---

<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--
  <link rel="manifest" href="/manifest.json" /> -->
    <link rel="sitemap" href="/sitemap-index.xml" />
    <meta name="robots" content="max-snippet:-1, INDEX, FOLLOW" />
    <title>{pageTitle}</title>
    <meta name="description" content="Liste der Anbieter und deren Details" />
    <link rel="canonical" href="https://www.musicstudio-ziebart.de/anbieter/" />
    <meta
      name="google-site-verification"
      content="Zitul6WICKD7zrzgptxGVrh2GEhozasdEM_d1tGi2aw"
    />
    <meta
      name="author"
      content="Musicstudio Ziebart, postmaster@musicstudio-ziebart.de"
    />
    <meta
      name="DC.Publisher"
      content="Musicstudio Ziebart, postmaster@musicstudio-ziebart.de"
    />
    <ManuellesBlockieren />
    <ExternalScripts />
    <ExternalScripts3 />
    <GoogleScripts />
  </head>
  <body>
    <h3>Anbieterliste</h3>
    <!-- Vendorliste von Consentmanager -->
     <!--
    <div id="cmpvendorlist"></div> -->
    <!--
    <script
      src="https://delivery.consentmanager.net/delivery/vendorlist.php?cdid=b018a967f10b6"
      type="text/javascript"
      nonce={nonce}
      async>
    </script> -->

    <div class="cmpvendorlistb018a967f10b6 cmpstyleroot"></div>
    <!--
    <script 
      src="https://delivery.consentmanager.net/delivery/vendorlist.php?cdid=b018a967f10b6&l=automatic" 
      type="text/javascript"
      nonce={nonce} 
      async>
    </script> -->
    <!--
    <script 
      src={`https://delivery.consentmanager.net/delivery/vendorlist.php?cdid=${cdid}&l=automatic`} 
      type="text/javascript" 
      nonce={nonce} 
      async>
    </script> -->

    <script 
      src="https://delivery.consentmanager.net/delivery/vendorlist.php?cdid=b018a967f10b6&l=automatic"
      type="text/javascript"
      nonce="{Astro.props.nonce}" 
      async>
    </script>


   


    <h3>Cookie Info Liste</h3>
    <!--
    <div id="cmpcookieinfo"></div> -->
    <!--
    <script
      src="https://delivery.consentmanager.net/delivery/cookieinfo.php?cdid=b018a967f10b6"
      type="text/javascript"
      nonce={nonce}
      async>
    </script> -->

    <div class="cmpcookieinfob018a967f10b6 cmpstyleroot"></div>
    <script 
      src="https://delivery.consentmanager.net/delivery/cookieinfo.php?cdid=b018a967f10b6&l=automatic" 
      type="text/javascript"
      nonce={nonce} 
      async>
    </script>

    <h3>Cookies Informationen</h3>
    <div id="cmpinlinepreferencesbox"></div>
    <link rel="stylesheet" href="https://delivery.consentmanager.net/delivery/cmpinline.min.css">

    <p><a href="/" class="normal-links">Zurück zur Startseite</a></p>

    <br />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const scripts = document.querySelectorAll("script");
        scripts.forEach((script, index) => {
          console.log(`Script ${index + 1} nonce:`, script.nonce || "Nicht vorhanden");
        });
      });
    </script>

    <script nonce={nonce}>
      document.addEventListener("DOMContentLoaded", function () {
        document.body.addEventListener("click", function (event) {
          if (event.target.matches(".cmpvendorlistb018a967f10b6 button")) {
            console.log("Button wurde geklickt:", event.target);
          }
        });
      });
    </script>

    <script nonce={nonce}>
      document.addEventListener("DOMContentLoaded", function () {
        function fixButtons() {
          document.querySelectorAll("[onclick]").forEach(function (el) {
            const onclickCode = el.getAttribute("onclick");
            if (onclickCode) {
              el.removeAttribute("onclick");
              el.addEventListener("click", function (event) {
                new Function(onclickCode).call(this, event);
              });
            }
          });
        }

        // Direkt beim Laden reparieren
        fixButtons();

        // Überwacht Änderungen im DOM und repariert neue Buttons
        new MutationObserver(fixButtons).observe(document.body, { childList: true, subtree: true });
      });
    </script>




  </body>
</html>
