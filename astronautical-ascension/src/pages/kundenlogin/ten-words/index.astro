---
import BaseLayout from "../../../layouts/BaseLayout.astro";
---

<BaseLayout title="Ten Words â€“ SchÃ¼lerbereich">

<article class="tenwords-page">

  <!-- LOGIN -->
  <section id="login-box">
    <h1>ğŸ” SchÃ¼lerbereich â€“ Ten Words</h1>
    <p>Bitte Passwort eingeben:</p>

    <input
      type="password"
      id="pw"
      placeholder="Passwort"
      autocomplete="off"
    />

    <button onclick="checkPassword()">Login</button>

    <p id="error" style="color:red; display:none;">
      âŒ Falsches Passwort
    </p>
  </section>

  <!-- GESCHÃœTZTER INHALT -->
  <section id="content" style="display:none;">
    <h1>ğŸ¸ Ten Words â€“ Unterrichtsmaterial</h1>

    <ul>
      <li>
        <a href="/downloads/Ten_Words_by_Satriani.pdf" download>
          ğŸµ Noten & Tabulatur
        </a>
      </li>
      <li>
        <a
          href="https://drive.google.com/uc?export=download&id=1VC6dS8mLwb0mPzFkvUXNzemQ2wxZGqJP"
          target="_blank"
          rel="noopener"
        >
          ğŸµ Backing Track
        </a>
      </li>
    </ul>
  </section>

</article>

<script>
const PASSWORD = "tenwords2026";

function showContent() {
  const loginBox = document.getElementById("login-box");
  const content = document.getElementById("content");

  if (loginBox) loginBox.style.display = "none";
  if (content) content.style.display = "block";
}

function checkPassword() {
  const inputEl = document.getElementById("pw") as HTMLInputElement;
  const error = document.getElementById("error");

  if (!inputEl) return;

  const input = inputEl.value;
  if (input === PASSWORD) {
    sessionStorage.setItem("tenwords-login", "ok");
    showContent();
  } else {
    if (error) error.style.display = "block";
  }
}

// Sofort prÃ¼fen, ob sessionStorage schon gesetzt ist
if (sessionStorage.getItem("tenwords-login") === "ok") {
  showContent();
}

// Optional: sofort Inhalt sichtbar, wenn man sessionStorage manuell in Konsole setzt
window.addEventListener("storage", (e) => {
  if (e.key === "tenwords-login" && e.newValue === "ok") {
    showContent();
  }
});

</script>

</BaseLayout>
